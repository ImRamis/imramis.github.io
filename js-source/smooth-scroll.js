class SmoothScroll{constructor(){this.init(),this.setupScrollProgress(),this.setupActiveNavHighlight()}init(){document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const o=e.getAttribute("href");if("#"===o)return;const n=document.querySelector(o);if(!n)return;this.scrollToElement(n),history.pushState(null,null,o);const l=document.getElementById("nav-links"),c=document.getElementById("mobile-toggle");l?.classList.contains("active")&&(l.classList.remove("active"),c?.classList.remove("active")),"undefined"!=typeof gtag&&gtag("event","navigation",{event_category:"engagement",event_label:o})}))}))}scrollToElement(e,t=200){const o=document.getElementById("navbar")?.offsetHeight||0,n=e.getBoundingClientRect().top+window.pageYOffset-o-20,l=window.pageYOffset,c=n-l,s=performance.now();requestAnimationFrame((function e(o){const n=o-s,r=Math.min(n/t,1),i=(a=r)<.5?2*a*a:(4-2*a)*a-1;var a;window.scrollTo(0,l+c*i),n<t&&requestAnimationFrame(e)}))}setupScrollProgress(){const e=document.getElementById("scroll-progress");if(!e)return;const t=()=>{const t=(document.documentElement.scrollTop||document.body.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100;e.style.width=t+"%"};let o=!1;window.addEventListener("scroll",(()=>{o||(window.requestAnimationFrame((()=>{t(),o=!1})),o=!0)})),t()}setupActiveNavHighlight(){const e=document.querySelectorAll("section[id]"),t=document.querySelectorAll(".nav-link"),o=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){const o=e.target.getAttribute("id");t.forEach((e=>e.classList.remove("active")));const n=document.querySelector(`.nav-link[href="#${o}"]`);n?.classList.add("active")}}))}),{rootMargin:"-20% 0px -70% 0px",threshold:0});e.forEach((e=>o.observe(e)))}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}let smoothScroll;window.addEventListener("scroll",(()=>{const e=document.getElementById("goTopBtn");document.body.scrollTop>100||document.documentElement.scrollTop>100?e.style.display="block":e.style.display="none"})),document.getElementById("goTopBtn").addEventListener("click",(()=>{const e=window.pageYOffset,t=performance.now();requestAnimationFrame((function o(n){const l=n-t,c=Math.min(l/200,1),s=(r=c)<.5?2*r*r:(4-2*r)*r-1;var r;window.scrollTo(0,e*(1-s)),l<200&&requestAnimationFrame(o)}))})),document.addEventListener("DOMContentLoaded",(()=>{CONFIG.features.smoothScroll&&(smoothScroll=new SmoothScroll)}));